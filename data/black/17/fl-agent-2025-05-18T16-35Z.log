agent=Fault Localizer Agent started
agent=Fault Localizer Agent tool start: get_function_body_tool
tool params: {"file_path":"black.py","function_name":"lib2to3_parse"}
agent=Fault Localizer Agent tool end: get_function_body_tool with result

<function_body_with_coverage file_path=black.py>
> def lib2to3_parse(src_txt: str) -> Node:
>     """Given a string with source, return the lib2to3 Node."""
>     grammar = pygram.python_grammar_no_print_statement
>     if src_txt[-1] != "\n":
!         src_txt += "\n"
!     for grammar in GRAMMARS:
!         drv = driver.Driver(grammar, pytree.convert)
!         try:
!             result = drv.parse_string(src_txt, True)
!             break
  
!         except ParseError as pe:
!             lineno, column = pe.context[1]
!             lines = src_txt.splitlines()
!             try:
!                 faulty_line = lines[lineno - 1]
!             except IndexError:
!                 faulty_line = "<line number missing in source>"
!             exc = ValueError(f"Cannot parse: {lineno}:{column}: {faulty_line}")
!     else:
!         raise exc from None
  
!     if isinstance(result, Leaf):
!         result = Node(syms.file_input, [result])
!     return result


<analysis>
- if the line begins with > then it was executed
- if the lines begins with ! then it was not executed
- if all the lines in the function begin with !, this funciton was never executed so ignore it
</analysis>

</function_body_with_coverage>

agent=Fault Localizer Agent ended with output:
The `lib2to3_parse` function in `black.py` fails when `src_txt` is an empty string because it directly accesses `src_txt[-1]` without checking if `src_txt` is empty. This causes the `IndexError` in the failing test.

### Fault Localization:
- **Faulty Code Hunk**: The line `if src_txt[-1] != "\n":` in `lib2to3_parse`.
- **Issue**: The function assumes `src_txt` is non-empty and tries to access its last character. However, when `src_txt` is empty, this operation is invalid.

### Explanation:
The function should first check if `src_txt` is empty before attempting to access `src_txt[-1]`. If `src_txt` is empty, it should either:
1. Return a default node (e.g., an empty file input node).
2. Raise a more descriptive error indicating that the input is empty.

### Output:
```output
name: lib2to3_parse
file: black.py
explanation: The function fails to handle empty strings, causing an IndexError when accessing src_txt[-1]. It should validate the input string before processing.
```
